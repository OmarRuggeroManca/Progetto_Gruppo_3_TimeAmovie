<div class="container">

  <div class="row ">

    <div class="col-md-6" id="poster">
      <div class="poster_container">
        <img src="https://image.tmdb.org/t/p/original{{movie.poster_path}}" width="70%" height="70%">
      </div>
    </div>

    <div class="col-md-6">
      <div>
        <fa-icon class="iconStar" [icon]="starIcon" size="lg" *ngIf="isFavorite"></fa-icon>
        <h2>{{movie.title}}</h2>
      </div>
      <div>
        <h3>{{movie.release_date}}</h3>
      </div>

      <div>
        <i class="genres" *ngFor="let genres of movie?.genres; last as isLast"> {{genres.name}}<span
            *ngIf="!isLast">,</span></i>
      </div>

      <div class="fieldsContainer">
        <div class="director">
          <b class="fieldName">Diretto da: </b>
          <span *ngFor="let director of directors; last as isLast"> {{ director.name}}<span
              *ngIf="!isLast">,</span></span>
        </div>
        <div class="screenwriter">
          <b class="fieldName">Scritto da: </b>
          <span *ngFor="let writer of writers; last as isLast"> {{ writer.name}}<span *ngIf="!isLast">,</span></span>
        </div>
        <div class="dop">
          <b class="fieldName">Direzione della fotografia: </b>
          <span *ngFor="let dop of dops; last as isLast"> {{ dop.name}}<span *ngIf="!isLast">,</span></span>
        </div>
        <div class="production">
          <b class="fieldName">Prodotto da: </b>
          <span *ngFor="let producer of producers; last as isLast"> {{producer.name}}<span *ngIf="!isLast">,</span>
          </span>
        </div>

      </div>

      <hr>

      <div *ngIf="isVisible">
        <p> {{movie.overview}}</p>
      </div>


      <div>
        <button id="primary-button" (click)="isVisible = !isVisible" *ngIf="isVisible && !isFavorite"
          type="button">Aggiungi ai
          preferiti </button>
      </div>




      <div class="formContainer" *ngIf="!isVisible">

        <form #movie="ngForm" (submit)="addFavoriteMovie(movie)">
          <div class="form-group row">
            <div class="col-8">              
                <input type="range" id="vol" step="1" name="vol" min="1" max="5" [ngModel] name="movie_rating">           
            </div>
          </div>
          <div class="form-group row">
            <label class="col-4"></label>
            <div class="col-8">
              <textarea [ngModel] name="movie_comment" id="movie_comment" name="movie_comment" cols="40" rows="4"
                class="form-control" required="required"></textarea>
            </div>
          </div>
          <div class="form-group row">
            <div class="offset-4 col-8">
              <button type="submit" id="primary-button">Invia</button>
              <button id="secondary-button" type="button" (click)="isVisible = !isVisible">Torna alla trama</button>
            </div>
          </div>
        </form>

      </div>

    </div>

  </div>
</div>


